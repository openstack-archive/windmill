- job:
    name: windmill-base
    parent: tox
    run: tests/playbooks/tox/run.yaml
    post-run:
      - tests/playbooks/tox/prove.yaml
    required-projects:
      - openstack/ansible-role-diskimage-builder
      - openstack/ansible-role-gearman
      - openstack/ansible-role-logrotate
      - openstack/ansible-role-nodepool
      - openstack/ansible-role-shade
      - openstack/ansible-role-ssh
      - openstack/ansible-role-statsd
      - openstack/ansible-role-sudoers
      - openstack/ansible-role-virtualenv
      - openstack/ansible-role-zookeeper
      - openstack/ansible-role-zuul
      - openstack/diskimage-builder
      - openstack-infra/gear
      - openstack-infra/nodepool
      - openstack-infra/shade
      - openstack-infra/zuul
    vars:
      tox_install_siblings: false

- job:
    name: windmill-centos-7
    parent: windmill-base
    nodeset: centos-7

- job:
    name: windmill-fedora-27
    parent: windmill-base
    nodeset: fedora-27

- job:
    name: windmill-ubuntu-bionic
    parent: windmill-base
    nodeset: ubuntu-bionic

- job:
    name: windmill-ubuntu-xenial
    parent: windmill-base
    nodeset: ubuntu-xenial
